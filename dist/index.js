!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r=self.crypto||self.msCrypto;e.exports=function(e){e=e||21;for(var t="",n=r.getRandomValues(new Uint8Array(e));e--;)t+="QLUint8ARdomValuesObj0h6345-79BCrypgJzHKTNYDSMkXPZ_FfG1WcqvwxEI2"[63&n[e]];return t}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return c(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function c(e,t,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,f(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,o=[{key:"create",value:function(e,t){var n=e;return n.sourceObjects=[],n.extData=t,n}}],(r=null)&&a(n.prototype,r),o&&a(n,o),t}(u(MouseEvent));function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.style={strokeWeight:2,fillColor:"transparent",strokeColor:"blue"},this.hoverStyle=null,this.shape="shape",this.nanoid=o()(),this.visible=!0,this.mouseOver=!1,this.extData={},this.eventListeners=new Map,this.contain=null}var t,n,r;return t=e,(n=[{key:"setLayer",value:function(e){this.layer=e,this.view=e.getMapView()}},{key:"on",value:function(e,t){this.eventListeners.set(e,{type:e,level:"shape",handler:t})}},{key:"off",value:function(e){this.eventListeners.delete(e)}}])&&h(t.prototype,n),r&&h(t,r),e}();function v(e,t,n,r,o,i){if(i>t&&i>r||i<t&&i<r)return 0;if(r===t)return 0;var a=r<t?1:-1,s=(i-t)/(r-t);1!==s&&0!==s||(a=r<t?.5:-.5);var u=s*(n-e)+e;return u===o?1/0:u>o?a:0}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=1e-8;function S(e,t){return Math.abs(e-t)<w}var O=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=d(this,g(t).call(this))).path=[],r.containerPath=[],r.h3Index="",r.shape="polygon",r.contain=function(e,t){var n=0,r=this.containerPath,o=r[0];if(!o)return!1;for(var i=1;i<r.length;i++){var a=r[i];n+=v(o[0],o[1],a[0],a[1],e,t),o=a}var s=r[0];return S(o[0],s[0])&&S(o[1],s[1])||(n+=v(o[0],o[1],s[0],s[1],e,t)),0!==n},r.path=e,r.style=Object.assign({},r.style,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),t}(y);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=window.AMap,E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.h3HexagonStyle={fillColor:"rgba(0,44,222,.3)",strokeWeight:0,strokeColor:"rgba(0,44,222,0)"},this.nanoid=o()(),this.ready=0,this.readyPromise=null,this.layersMap=new Map,this.layers=[],this.renderFlag=!1,this.canvasShapesMap=new Map,this.canvasEvent=null,this.mapShapesMap=new Map,this.marksList=[],this.mouseTool=null,this.onDrawClose=null,this.shapeEditor=null,this.editingMapShape=null,this.eventListenerList=[],this.mouseDown=!1,this.mouseDownTime=null,this.mapEventListeners=new Map,this.extraData={}}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t){this.mapEventListeners.set(e,{type:e,level:"map",handler:t})}},{key:"off",value:function(e){this.mapEventListeners.delete(e)}},{key:"initMap",value:function(e,t){var n,r=this,o=arguments;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:["AMap.MouseTool"],this.map=new _.Map(e,t),i.abrupt("return",new Promise((function(e,t){r.readyPromise={resolve:e,reject:t},r.map.plugin(n,(function(){r.mouseTool=new _.MouseTool(r.map),r.mouseTool.on("draw",(function(e){e.type;var t=e.obj,n=r.addPolygonFromMapPolygon(t);r.map.remove(t),r.onDrawClose&&r.onDrawClose(n),r.mouseTool.close()}));var t=document.createElement("canvas"),n=new _.CustomLayer(t,{alwaysRender:!0,map:r.map,zIndex:100});n.render=function(e){var n=r.map.getSize(),o=n.getWidth(),i=n.getHeight(),a=_.Browser.retina;a&&(o*=2,i*=2),t.width=o,t.height=i,t.style.width=o+"px",t.style.height=i+"px",e||(e={}),e.ctx=t.getContext("2d"),e.retina=a,r.layers.forEach((function(t){t.visible&&t.render(e)}))},["click","dblclick","mousemove"].forEach((function(e){t.addEventListener(e,(function(t){var n=Date.now()-r.mouseDownTime;if(!("click"===e&&n>500||r.mouseDown)){var o=p.create(t),i=!0,a=!1,s=void 0;try{for(var u,c=r.layers[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value,f=null,h=!0,y=!1,v=void 0;try{for(var b,d=l.shapes[Symbol.iterator]();!(h=(b=d.next()).done);h=!0){var g=b.value;if(g.contain&&g.contain(t.offsetX,t.offsetY)){g.eventListeners.has(e)&&g.eventListeners.get(e).handler(o),f=g,o.sourceObjects.push(g);break}}}catch(e){y=!0,v=e}finally{try{h||null==d.return||d.return()}finally{if(y)throw v}}if(f){l.eventListeners.has(e)&&l.eventListeners.get(e).handler(o),o.sourceObjects.push(l);break}}}catch(e){a=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}r.mapEventListeners.has(e)&&r.mapEventListeners.get(e).handler(o)}}))})),t.addEventListener("mousedown",(function(e){r.mouseDownTime=Date.now(),r.mouseDown=!0})),t.addEventListener("mouseup",(function(e){r.mouseDown=!1})),r.customCanvasLayer=n,e(),r.ready=1}))})));case 3:case"end":return i.stop()}}),null,this)}},{key:"render",value:function(){var e=this;this.renderFlag=!0,setTimeout((function(){e.renderFlag&&(e.renderFlag=!1,e.customCanvasLayer.render())}))}},{key:"setMap",value:function(e){this.map=e}},{key:"setZoomAndCenter",value:function(e,t){this.map.setZoomAndCenter(e,t)}},{key:"setCenter",value:function(e){this.map.setCenter(e)}},{key:"addControl",value:function(e,t){this.map.addControl(new _[e](t))}},{key:"addMarker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new _.Marker(k({map:this.map},e));return t.nanoid=o()(),this.mapShapesMap.set(t.nanoid,t),t.nanoid}},{key:"addMapPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={fillColor:"rgba(0,44,222,0)",strokeWeight:2,strokeColor:"rgba(0,44,222,.5)"};t=Object.assign({},n,t);var r=new _.Polygon(k({path:e},t));return r.nanoid=o()(),this.mapShapesMap.set(r.nanoid,r),this.map.add(r),r}},{key:"removeMapItem",value:function(e){var t=this.mapShapesMap.get(e);t&&(this.map.remove(t),this.mapShapesMap.delete(e))}},{key:"addPolygon",value:function(e){return this.canvasShapesMap.set(e.nanoid,e),this.renderShapes(),e}},{key:"addPolygonFromMapPolygon",value:function(e){var t=e.getOptions(),n={fillColor:t.fillColor,strokeColor:t.strokeColor,strokeWeight:t.strokeWeight};return this.addPolygon(new O(e.getPath().map((function(e){return[e.lng,e.lat]})),n))}},{key:"addCircle",value:function(e){return this.canvasShapesMap.set(e.nanoid,e),this.renderShapes(),e}},{key:"removeShapes",value:function(e){var t=this;e.forEach((function(e){return t.canvasShapesMap.delete(e)})),this.renderShapes()}},{key:"hideShapes",value:function(e){this.setShapeVisible(e.map((function(e){return{id:e,visible:!1}})))}},{key:"showShapes",value:function(e){this.setShapeVisible(e.map((function(e){return{id:e,visible:!0}})))}},{key:"setShapeVisible",value:function(e){var t=this;e.forEach((function(e){var n=t.canvasShapesMap.get(e.id);n&&(n.visible=e.visible)})),this.renderShapes()}},{key:"renderShapes",value:function(){var e=this;setTimeout((function(){e.layers.forEach((function(e){e.render()}))}),0)}},{key:"setShapeStyle",value:function(e,t){var n=this.canvasShapesMap.get(e);n&&(n.style=Object.assign(n.style,t),this.renderShapes())}},{key:"clearShapes",value:function(){this.canvasShapesMap.clear(),this.mapShapesMap.clear(),this.renderShapes()}},{key:"setMarks",value:function(e){var t=this;this.marksList.forEach((function(e){t.canvasShapesMap.delete(e.nanoid)})),this.marksList=e,e.forEach((function(e){t.canvasShapesMap.set(e.nanoid,e)})),this.renderShapes()}},{key:"drawPolygon",value:function(e){this.mouseTool.polygon(e)}},{key:"editPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.editingMapShape){var n=this.canvasShapesMap.get(e);if(n){this.hideShapes([e]),n=n;var r=new _.Polygon(k({path:n.path.map((function(e){return[e[0],e[1]]}))},n.style));r.nanoid=e,this.editingMapShape=r,this.map.add(r),this.shapeEditor=new _.PolyEditor(this.map,r),this.shapeEditor.open(),t&&(t({id:e,area:r.getArea()}),this.shapeEditor.on("adjust",(function(){t({id:e,area:r.getArea()})})))}}}},{key:"removeEditingShape",value:function(){this.editingMapShape&&(this.shapeEditor.close(),this.shapeEditor=null,this.showShapes([this.editingMapShape.nanoid]),this.map.remove(this.editingMapShape),this.editingMapShape=null)}},{key:"closeEditShape",value:function(){if(this.editingMapShape){var e=this.canvasShapesMap.get(this.editingMapShape.nanoid),t={id:this.editingMapShape.nanoid,area:this.editingMapShape.getArea(),path:this.editingMapShape.getPath().map((function(e){return[e.lng,e.lat]}))};return e.path=t.path,this.removeEditingShape(),t}return null}},{key:"cancelEditShape",value:function(){this.removeEditingShape()}},{key:"closeDrawPolygon",value:function(){this.mouseTool.close(!0)}}])&&j(t.prototype,n),r&&j(t,r),e}(),C=new E;function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=T(this,L(t).call(this))).shape="circle",o.contain=function(e,t){return Math.sqrt(Math.pow(e-this.centerPixel.x,2)+Math.pow(t-this.centerPixel.y,2))<this.radiusPixel},o.center=e,o.radius=n,o.style=Object.assign({},o.style,r),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),t}(y);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=W(this,X(t).call(this))).path=[],r.containerPath=[],r.shape="line",r.path=e,r.style=Object.assign({},r.style,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,e),t}(y);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=V(this,U(t).call(this))).shape="mark",r.location=e,r.style=Object.assign({},r.style,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,e),t}(y);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapes=[],this.shapesMap=new Map,this.ids=[],this.json="",this.shapeType="shape",this.name="",this.nanoid=o()(),this.extData={},this.style={strokeWeight:2,fillColor:"transparent",strokeColor:"blue"},this._visible=!0,this.eventListeners=new Map,this.mouseOver=!1,this.view=t,this.view.layersMap.set(this.nanoid,this),this.view.layers.push(this)}var t,n,r;return t=e,(n=[{key:"getMapView",value:function(){return this.view}},{key:"on",value:function(e,t){this.eventListeners.set(e,{type:e,level:"layer",handler:t})}},{key:"off",value:function(e){this.eventListeners.delete(e)}},{key:"hide",value:function(){this._visible=!1,this.view.render()}},{key:"show",value:function(){this._visible=!0,this.view.render()}},{key:"clear",value:function(){this.shapesMap.clear(),this.shapes.splice(0),this.view.render()}},{key:"addShape",value:function(e,t){this.shapes.push(e),this.shapesMap.set(e.nanoid,e),this.view.render()}},{key:"removeShape",value:function(e){var t,n;"string"==typeof e?(n=e,t=this.shapesMap.get(n)):e instanceof y&&(t=e,n=e.nanoid),t&&(this.shapesMap.delete(n),this.shapes.splice(this.shapes.indexOf(t),1)),this.view.render()}},{key:"render",value:function(e){this.CustomRender(e,(function(e){}))}},{key:"data",value:function(e){var t=this;this.shapesMap.clear(),this.shapes.splice(0),e.forEach((function(e){var n=t.parseData(e);n.extData=e.extra,t.shapesMap.set(n.nanoid,n),t.shapes.push(n)})),this.view.render()}},{key:"visible",get:function(){return this._visible}},{key:"map",get:function(){return this.view?this.view.map:null}}])&&B(t.prototype,n),r&&B(t,r),e}();function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=N(this,J(t).call(this,e))).shapes=[],n.shapesMap=new Map,n.shapeType="polygon",n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,e),n=t,(r=[{key:"CustomRender",value:function(e,t){var n=this,r=e.ctx,o=e.event;e.retina,this.shapesMap.forEach((function(e){var i=e.style;r.fillStyle=i.fillColor,r.strokeStyle=i.strokeColor,r.lineWidth=i.strokeWeight,r.beginPath();var a=e.path;e.containerPath.splice(0);for(var s=0;s<a.length;s++){var u=a[s],c=n.map.lngLatToContainer(u);e.containerPath.push([c.getX(),c.getY()]),r.lineTo(c.getX(),c.getY())}r.closePath(),o&&t(e),r.stroke(),r.fill()}))}},{key:"parseData",value:function(e){var t=e.config,n=e.style,r=new O(t,n);return r.setLayer(this),r}}])&&Z(n.prototype,r),o&&Z(n,o),t}(G);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=te(this,ne(t).call(this,e))).shapes=[],n.shapesMap=new Map,n.shapeType="circle",n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),n=t,(r=[{key:"CustomRender",value:function(e,t){var n=this,r=e.ctx,o=(e.retina,e.event);this.shapesMap.forEach((function(e){var i=e.style;r.fillStyle=i.fillColor,r.strokeStyle=i.strokeColor,r.lineWidth=i.strokeWeight,r.beginPath(),e=e;var a=n.map.lngLatToContainer(e.center),s={x:a.getX(),y:a.getY()},u=e.center,c=s,l=e.center.map((function(e){return e}));l[1]>=89?l[1]-=1:l[1]+=1;var f=n.map.lngLatToContainer(l),p=AMap.GeometryUtil.distance(u,l),h=Math.sqrt(Math.pow(c.x-f.getX(),2)+Math.pow(c.y-f.getY(),2))/p,y=e.radius*h;r.arc(a.getX(),a.getY(),y,0,2*Math.PI),e.centerPixel=s,e.radiusPixel=y,r.closePath(),o&&t(e),r.stroke(),r.fill()}))}},{key:"parseData",value:function(e){var t=e.config,n=e.style,r=t.center,o=t.radius,i=new R(r,o,n);return i.setLayer(this),i}}])&&ee(n.prototype,r),o&&ee(n,o),t}(G);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=se(this,ue(t).call(this,e))).shapes=[],n.shapesMap=new Map,n.shapeType="line",n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,e),n=t,(r=[{key:"CustomRender",value:function(e,t){var n=this,r=e.ctx,o=(e.retina,e.event);this.shapesMap.forEach((function(e){var i=e.style;r.fillStyle=i.fillColor,r.strokeStyle=i.strokeColor,r.lineWidth=i.strokeWeight,r.beginPath();var a=e.path;e.containerPath.splice(0);for(var s=0;s<a.length;s++){var u=a[s],c=n.map.lngLatToContainer(new AMap.LngLat(u[0],u[1]));e.containerPath.push([c.getX(),c.getY()]),r.lineTo(c.getX(),c.getY())}o&&t(e),r.stroke()}))}},{key:"parseData",value:function(e){var t=e.config,n=e.style,r=new F(t,n);return r.setLayer(this),r}}])&&ae(n.prototype,r),o&&ae(n,o),t}(G);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=he(this,ye(t).call(this,e))).shapes=[],n.shapesMap=new Map,n.shapeType="mark",n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,e),n=t,(r=[{key:"CustomRender",value:function(e,t){var n=this,r=e.ctx,o=(e.retina,e.event);this.shapesMap.forEach((function(e){var i=e.style;r.fillStyle=i.strokeColor,r.strokeStyle=i.strokeColor,r.lineWidth=i.strokeWeight,r.beginPath(),e=e;var a=n.map.lngLatToContainer(new AMap.LngLat(e.location[0],e.location[1])),s=e.style.strokeWeight;r.arc(a.getX(),a.getY(),s,0,2*Math.PI),r.closePath(),o&&t(e),r.stroke(),r.fill()}))}},{key:"parseData",value:function(e){var t=e.config,n=e.style,r=new z(t,n);return r.setLayer(this),r}}])&&pe(n.prototype,r),o&&pe(n,o),t}(G),de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 4===e.length&&(e="#"+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)+e.charAt(3)+e.charAt(3)),"rgba(".concat(parseInt(e.substr(1,2),16),",").concat(parseInt(e.substr(3,2),16),",").concat(parseInt(e.substr(5,2),16),",").concat(t,")")},ge=function(e){var t=e.substring(e.indexOf("(")+1,e.length-1).split(","),n=function(e){return Number(e).toString(16).padStart(2,"0")};return"#".concat(n(t[0])).concat(n(t[1])).concat(n(t[2]))},me={calcColorLevel:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.E;return"linear"===r?e/t:"log10"===r?(n=e/t*9+1,Math.log10(n)):"log2"===r?(n=e/t+1,Math.log2(n)):"ln"===r?(n=e/t*(Math.E-1)+1,Math.log(n)):"logx"===r?(n=e/t*(o-1)+1,Math.log(n)/Math.log(o)):void 0},generateColor:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=199;if(t<=1)return"rgba(".concat(Math.round(Math.random()*r),",").concat(Math.round(Math.random()*r),",").concat(Math.round(Math.random()*r),", ").concat(n,")");for(var o=[],i=1;i<t;i++)o.push(e());return o},hex2rgb:de,rgb2hex:ge,toRGBA:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 0===e.indexOf("#")?de(e,t):0===e.indexOf("rgb")?de(ge(e),t):void 0}};n.d(t,"MapView",(function(){return E})),n.d(t,"CanvasShape",(function(){return y})),n.d(t,"CanvasCircle",(function(){return R})),n.d(t,"CanvasLine",(function(){return F})),n.d(t,"CanvasMark",(function(){return z})),n.d(t,"CanvasPolygon",(function(){return O})),n.d(t,"Layer",(function(){return G})),n.d(t,"CircleLayer",(function(){return oe})),n.d(t,"LineLayer",(function(){return le})),n.d(t,"MarkLayer",(function(){return be})),n.d(t,"PolygonLayer",(function(){return Q})),n.d(t,"colorUtils",(function(){return me}));t.default=C}]));